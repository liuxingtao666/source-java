===========账单管理=============
1、整体需求
	账单管理模块只有查询功能，查询的是月底自动计算
	的用户账单信息，该信息是通过存储过程自动计算
	出来。
	
2、详细需求
	1）涉及的表
		a、账单主表bill
			记录的是一个用户的account账号，本月应该
			收费的情况。
		b、账单子表bill_item
			记录的是用户的account账号下，每一个登录
			UNIX服务器的service账号的本月收费情况。
	2）这两张表的数据来源
		a、用户登录登出Unix服务器，在登出时DMS自动
			采集用户登录登出的信息，并将其存入数据库的
			业务详单表service_detail。
			注意：采集过程只关注时长，费用不关注，因此
				采集到的数据中费用cost为null。
		b、计算详单表的费用cost
			--采用触发器自动计算，在插入service_detail
				数据之后自动计算。
			--最终计算业务账号的费用公式是
				包月1
					总费用=基本费用
				套餐2
					总费用=套餐基本费+单价*超出时长
					时长是不断累计直到超出的，因此为了
					方便取累计时长，我们每次计算完都将
					本次时长进行累计，存入month_duration。
				计时3
					总费用=单价*时长
			--详单表中的费用，指的是超出时长的费用，
				并非是总费用。
		c、计算账单数据
			--每个月月底自动调用存储过程进行计算
			--计算的数据来源是service_detail
3、任务
	1）写一个触发器，在插入一条service_detail后，
		自动计算出这条数据的费用
	2）写一个存储过程，根据service_detail中的数据，
		计算出账单数据bill,bill_item
	3）设置月底自动调用存储过程
		a、在Oracle数据库上设置任务
		b、使用开源组件quartz，开启任务线程，
			实现自动调用存储过程。
	4）开发账单查询功能
	
4、实现
	1）参考PLSQL任务.sql
	2）参考PLSQL任务.sql
	3）使用Oracle任务实现自动调用存储过程
		由于项目的存储过程比较复杂，不好直观的
		看出是否执行成功。另外项目要求这个存储
		过程在月底调用，频率太低不方便观察。因此
		我提供一个简单的存储过程，并且设置每10s
		调用一次，来演示Oracle设置任务。
		a、写一个简单的存储过程，并运行
			 create or replace procedure proc1
			 is
			 begin
			 	insert into employee 
			 	values(employee_seq.nextval,'aaa',2000.0);
			 end;
			 /
		b、在SQL Developer中，调度任务下，将此存储
			过程定义成一个程序
			--右键程序，在弹出列表中点击新建程序
			--在弹出框中，设置该程序的名称，并在程序
				类型中选择存储过程，然后在过程下拉列表
				中选择创建的proc1。
			--点击应用，在程序下会出现刚才创建的一个
				程序元素（对象）。
		c、在SQL Developer中，调度任务下，为定义好
			的程序设置触发时机
			--右键作业，在弹出列表中点击新建作业
			--在弹出框中，设置改作业的名称，并在作业
				类型中选择指定程序，然后在程序下拉选中
				选择刚才创建好的程序
			--在何时执行作业中选择存储过程运行的
				开始日期和结束日期，结束如期如果不写，
				将无限制循环下去
			--选择重复选项，在重复时间间隔上，设置
				按年/月/日/周/小时/分钟/秒进行循环。
				
				
			